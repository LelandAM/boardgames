<h2>Profile Page for <%= @user.username %> </h2>

<% unless @user == current_user %>
  <% if @friendship == nil %>
    <%= button_to "Add Friend", friend_request_path, params: {friend_id: @user.id} %>
  <% elsif @friendship.status == "confirmed" %>
      <%= button_to "Remove Friend", friend_removal_path, params: {user_id: current_user.id, friend_id: @user.id}, method: :delete, data: { confirm: 'Are you sure?' }%>
  <% elsif @friendship.status == "pending" %>
        <p> Your Friendship Request is Pending </p>
  <% end %>
<% end %>

<div class ="confirmed-friends">
  <h1><%= @user.username %>'s Friends</h1>
    <% if @confirmed_friends %>
      <ul>
        <% @confirmed_friends.each do |friend| %>
          <li> <%= link_to friend.username, user_path(friend) %></li>
          <%= button_to "Remove Friend", friend_removal_path, params: {friend_id: friend.id}, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
      </ul>
    <% end %>
 </div>

  <% if @user == current_user %>
    <div class ="pending-friends">
      <h1>Your Friend Requests</h1>
      <ul>
        <% @pending_friends.each do |pf| %>
        <li> Pending Friend Request From <%= pf.username.capitalize %> </li>
        <%= button_to "Approve Friend", friend_approval_path, params:{user_id: pf.id} %></div>
        <% end %>
      </ul>
      <%= link_to "Edit Profile", edit_user_path %>
      <%= link_to "Delete Profile", user_path, method: :delete %>
    </div>
  <% end %>


<div class='favorites_list container'>
  <ul>
    <h2>Favorites</h2>
    <% @user.favorited_games.each do |game|%>
      <li><img class='thumbnail' src="<%= game.photo %>">  <%= link_to game.title, game_path(game.id) %></li>
      <% end %>
  </ul>
</div>
